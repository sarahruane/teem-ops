<div class="row">
	<div class="col-xs-12">
		<div>
			<a ui-sref="apps">&laquo; All Apps</a>
		</div>
		<h3>{{ currentApp.appName }}</h3>
	</div>
</div>

<div class="row clearfix app-details-container">
	<div class="app-details-menu col-xs-3" role="complementary" data-offset-top="70" bs-affix>
		<ul class="nav nav-pills nav-stacked">
		  	<li bs-scrollspy data-target="#deploy">
		  		<a href="" data-ng-click="scrolltoHref('deploy')">Deploy</a>
		  	</li>
		  	<li bs-scrollspy data-target="#infrastructure">
		  		<a href="" data-ng-click="scrolltoHref('infrastructure')">Infrastructure</a>
		  	</li>
		  	<li bs-scrollspy data-target="#running-costs">
		  		<a href="" data-ng-click="scrolltoHref('running-costs')">Running Costs</a>
		  	</li>
		  	<li bs-scrollspy data-target="#high-availability">
		  		<a href="" data-ng-click="scrolltoHref('high-availability')">High Availability Settings</a>
		  	</li>
		  	<li bs-scrollspy data-target="#source-code">
		  		<a href="" data-ng-click="scrolltoHref('source-code')">Source Code</a>
		  	</li>
		  	<li bs-scrollspy data-target="#scripts">
		  		<a href="" data-ng-click="scrolltoHref('scripts')">Scripts</a>
		  	</li>
		  	<li bs-scrollspy data-target="#database">
		  		<a href="" data-ng-click="scrolltoHref('database')">Database</a>
		  	</li>
		  	<li bs-scrollspy data-target="#caching">
		  		<a href="" data-ng-click="scrolltoHref('caching')">Caching</a>
		  	</li>
		  	<li bs-scrollspy data-target="#app-settings">
		  		<a href="" data-ng-click="scrolltoHref('app-settings')">App Settings</a>
		  	</li>
		</ul>
	</div>
	<div class="app-details-content col-xs-9">
	 	<div id="deploy">
		  	<div class="panel panel-default full-width">
				<div class="panel-heading clearfix">
					<h4 class="pull-left">Deploy</h4>
					<div edit-mode-panel 
						edit-enabled="editModes.deploy" 
						toggle="toggleEditMode('deploy')" 
						save="saveApp('deploy')" 
						class="pull-right">
					</div>
				</div>
				<div class="panel-body">
					<div class="form-group">
					  	<label for="cloudProvider">Deploy to:</label>
					  	<span data-ng-hide="editModes.deploy" data-ng-cloak>
					  		{{ currentApp.cloud.provider || 'None selected' }}
					  	</span>
					  	<div data-ng-show="editModes.deploy" data-ng-cloak>
						    <div class="btn-group">
						        <label class="btn btn-option" name="cloudProvider" ng-model="currentApp.cloud.provider" uib-btn-radio="'AWS'" required>AWS</label>
						        <label class="btn btn-option" name="cloudProvider" ng-model="currentApp.cloud.provider" uib-btn-radio="'Azure'" required>Azure</label>
						        <label class="btn btn-option" name="cloudProvider" ng-model="currentApp.cloud.provider" uib-btn-radio="'Google'" required>Google</label>
						    </div>
						</div>
					</div>
					<div class="form-group">
					  	<label for="cloudRegion">Region:</label>
					  	<span data-ng-show="!editModes.deploy" data-ng-cloak>
					  		{{ currentApp.cloud.region || 'None selected' }}
					  	</span>
					  	<div data-ng-show="editModes.deploy" data-ng-cloak>
						  	<select id="cloudRegion" name="cloudRegion" class="form-control inline" data-ng-model="currentApp.cloud.region" >
						  			<option value="">Please select</option>
						  			<option value="asia">Asia</option>
						  			<option value="europe">Europe</option>
						  			<option value="north-america">North America</option>
						  	</select>
					  	</div>
					</div>
					<div class="form-group">
					  	<label for="cloudRegion">Instance Size:</label>
					  	<span data-ng-hide="editModes.deploy" data-ng-cloak>
					  		{{ currentApp.cloud.instanceSize || 'None selected' }}
					  	</span>
					  	<div data-ng-show="editModes.deploy" data-ng-cloak>
						  	<select id="instanceSize" name="instanceSize" class="form-control inline" data-ng-model="currentApp.cloud.instanceSize">
						  			<option value="">Please select</option>
						  			<option value="10GB">10GB</option>
						  			<option value="20GB">20GB</option>
						  			<option value="50GB">50GB</option>
						  	</select>
						</div>
					</div>
					
					<button class="btn btn-primary" data-ng-enabled="currentApp.cloud.provider">Deploy now</button>
				</div>
			</div>
	  	</div>
	  	<div id="infrastructure">
	  		<div class="panel panel-default">
				<div class="panel-heading clearfix">
					<h4 class="pull-left">Infrastructure</h4>
					<div edit-mode-panel 
						edit-enabled="editModes.infrastructure" 
						toggle="toggleEditMode('infrastructure')" 
						save="saveApp('infrastructure')" 
						class="pull-right">
					</div>
				</div>
				<div class="panel-body">
					<div class="form-group">
					  	<label for="os">Operating System</label>
					  	<span data-ng-hide="editModes.infrastructure" data-ng-cloak>
					  		{{ currentApp.os.name || 'None selected' }}
					  	</span>
					  	<div data-ng-show="editModes.infrastructure" data-ng-cloak>
						    <select id="os" name="os" class="form-control inline" data-ng-model="currentApp.os.name">
						    	<option value="">Please select</option>
					  			<option value="Redhat">Redhat</option>
					  			<option value="Ubuntu">Ubuntu</option>
					  			<option value="Windows">Windows</option>
						    </select>
						</div>
					</div>
				</div>
			</div>
		</div>
	  	<div id="running-costs">
	  		<div class="panel panel-default">
				<div class="panel-heading">
					<h4>Running Costs</h4>
				</div>
				<div class="panel-body"></div>
			</div>
		</div>
		<div id="high-availability">
	  		<div class="panel panel-default">
				<div class="panel-heading clearfix">
					<h4 class="pull-left">High Availability Settings</h4>
					<div edit-mode-panel 
						edit-enabled="editModes.availability" 
						toggle="toggleEditMode('availability')" 
						save="saveApp('availability')" 
						class="pull-right">
					</div>
				</div>
				<div class="panel-body">
					<label for="loadBalancing">Load Balancing</label>
					<span data-ng-hide="editModes.availability" data-ng-cloak>
					  	{{ currentApp.highAvailability.loadBalancingEnabled || 'Not selected' }}
					</span>	
					<div data-ng-show="editModes.availability" data-ng-cloak>
						<div class="btn-group">
					        <label class="btn btn-primary" name="environment" ng-model="currentApp.highAvailability.loadBalancingEnabled" uib-btn-radio="'on'" required>On</label>
					        <label class="btn btn-primary" name="environment" ng-model="currentApp.highAvailability.loadBalancingEnabled" uib-btn-radio="'off'" required>Off</label>
					    </div>
					</div>
					<br/>
					<label for="loadBalancing">Autoscaling</label>
					<span data-ng-hide="editModes.availability" data-ng-cloak>
					  	{{ currentApp.highAvailability.autoScalingEnabled || 'Not selected' }}
					</span>	
					<div data-ng-show="editModes.availability" data-ng-cloak>
						<div class="btn-group">
					        <label class="btn btn-primary" name="environment" ng-model="currentApp.highAvailability.autoScalingEnabled" uib-btn-radio="'on'" required>On</label>
					        <label class="btn btn-primary" name="environment" ng-model="currentApp.highAvailability.autoScalingEnabled" uib-btn-radio="'off'" required>Off</label>
					    </div>
					</div>
				</div>
			</div>
		</div>
		<div id="source-code">
	  		<div class="panel panel-default">
				<div class="panel-heading clearfix">
					<h4 class="pull-left">Source Code</h4>
					<div edit-mode-panel 
						edit-enabled="editModes.sourceCode" 
						toggle="toggleEditMode('sourceCode')" 
						save="saveApp('sourceCode')" 
						class="pull-right">
					</div>
				</div>
				<div class="panel-body">
					<label for="source">Source</label>
					<span data-ng-hide="editModes.sourceCode" data-ng-cloak>
					  	{{ currentApp.sourceCode.source || 'Not selected' }}
					</span>	
					<div data-ng-show="editModes.sourceCode" data-ng-cloak>
						<div class="btn-group">
					        <label class="btn btn-option" name="sourceCode" ng-model="currentApp.sourceCode.source" uib-btn-radio="'GIT'">GIT</label>
					        <label class="btn btn-option" name="sourceCode" ng-model="currentApp.sourceCode.source" uib-btn-radio="'SVN'">SVN</label>
					         <label class="btn btn-option" name="sourceCode" ng-model="currentApp.sourceCode.source" uib-btn-radio="'FILEUPLOAD'">File Upload</label>
					    </div>
					</div>
					<div data-ng-show="currentApp.sourceCode.source === 'GIT'">
						<div class="form-group">
							<label for="githubRepo">GitHub repo</label>
							<span data-ng-hide="editModes.sourceCode" data-ng-cloak>
							  	{{ currentApp.sourceCode.path || 'Not selected' }}
							</span>	
							<div data-ng-show="editModes.sourceCode" data-ng-cloak>
								<input type="text" id="githubRepo" name="githubRepo" class="form-control inline" data-ng-model="currentApp.sourceCode.path" data-ng-required="currentApp.sourceCode.source === 'GIT'">
								<!--<span ng-show="(appForm.$submitted || appForm.sourceCode.$touched) && appForm.githubRepo.$invalid" class="alert alert-danger" role="alert">
									<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
									<span class="sr-only">Error:</span>
							    	<span ng-show="appForm.githubRepo.$error.required">Please fill in a github repo</span>
							    </span>-->
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div id="scripts">
	  		<div class="panel panel-default">
				<div class="panel-heading">
					<h4>Scripts</h4>
				</div>
				<div class="panel-body"></div>
			</div>
		</div>
		<div id="database">
	  		<div class="panel panel-default">
				<div class="panel-heading clearfix">
					<h4 class="pull-left">Database(s)</h4>
					<div edit-mode-panel 
						edit-enabled="editModes.database" 
						toggle="toggleEditMode('database')" 
						save="saveApp('database')" 
						class="pull-right">
					</div>
				</div>
				<div class="panel-body">
					<div class="form-group">
					  	<label for="database">Database(s)</label><br/>
					  	<span data-ng-hide="editModes.database" data-ng-cloak>
						  	{{ currentApp.database || 'None selected' }}
						</span>
						<div data-ng-show="editModes.database" data-ng-cloak>
							<div class="btn-group">
						        <label class="btn btn-option" name="database" ng-model="currentApp.database.SQLSERVER" uib-btn-checkbox>SQL Server</label>
						        <label class="btn btn-option" name="database" ng-model="currentApp.database.MYSQL" uib-btn-checkbox>MySQL</label>
						        <label class="btn btn-option" name="database" ng-model="currentApp.database.MONGODB" uib-btn-checkbox>MongoDB</label>
						    </div>
						</div>
					</div>

				</div>
			</div>
		</div>
		<div id="caching">
	  		<div class="panel panel-default">
				<div class="panel-heading clearfix">
					<h4 class="pull-left">Caching</h4>
					<div edit-mode-panel 
						edit-enabled="editModes.cache" 
						toggle="toggleEditMode('cache')" 
						save="saveApp('cache')" 
						class="pull-right">
					</div>
				</div>
				<div class="panel-body">
					<div data-ng-hide="editModes.cache" data-ng-cloak>
						<div>
						  	<label>Caching server</label>
						  	<span>{{ currentApp.caching.provider || 'None selected' }}</span>
						</div>
						<div>
						  	<label>Cache size</label>
						  	<span>{{ currentApp.caching.size || 'None selected' }}</span>
						</div>
					</div>
					<div data-ng-show="editModes.cache" data-ng-cloak>
						<div class="form-group">
							<label for="cacheProvider">Select caching server</label><br/>
							<div class="btn-group">
						        <label class="btn btn-option" name="cacheProvider" ng-model="currentApp.caching.provider" uib-btn-radio="'ELASTICACHE'">Elasticache</label>
						        <label class="btn btn-option" name="cacheProvider" ng-model="currentApp.caching.provider" uib-btn-radio="'MEMCACHED'">Memcached</label>
						    </div>
						</div>
					    <div class="form-group">
							<label for="cacheSize">Cache size</label><br/>
						  	<select id="cacheSize" name="cacheSize" class="form-control inline" data-ng-model="currentApp.caching.size" data-ng-required="app.caching.provider">
						  			<option value="">Please select</option>
						  			<option value="1GB">1GB</option>
						  			<option value="2GB">2GB</option>
						  			<option value="4GB">5GB</option>
						  	</select>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div id="app-settings">
	  		<div class="panel panel-default">
				<div class="panel-heading clearfix">
					<h4 class="pull-left">Basic App Settings</h4>
					<div edit-mode-panel 
						edit-enabled="editModes.basicSettings" 
						toggle="toggleEditMode('basicSettings')" 
						save="saveApp('basicSettings')" 
						class="pull-right">
					</div>
				</div>
				<div class="panel-body">
					<div class="form-group">
						<label for="appName">App name</label>
						<span data-ng-hide="editModes.basicSettings" data-ng-cloak>
						  	{{ currentApp.appName }}
						</span>
					  	<span data-ng-show="editModes.basicSettings" data-ng-cloak>
							<input type="text" id="appName" name="appName" class="form-control inline" data-ng-model="currentApp.appName" required>
						</span>
					</div>
					<div class="form-group">
						<label for="environment">Choose environment</label>
					    <span data-ng-hide="editModes.basicSettings" data-ng-cloak>
						  	{{ currentApp.environment }}
						</span>
						<br/>
					    <div class="btn-group" data-ng-show="editModes.basicSettings" data-ng-cloak>
					        <label class="btn btn-option" name="environment" ng-model="currentApp.environment" uib-btn-radio="'LAMP'" required>LAMP</label>
					        <label class="btn btn-option" name="environment" ng-model="currentApp.environment" uib-btn-radio="'NGINX'" required>NGINX</label>
					        <label class="btn btn-option" name="environment" ng-model="currentApp.environment" uib-btn-radio="'ASPNET'" required>ASP.NET</label>
					    </div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>